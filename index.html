<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Georgian Transcription Converter</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #fdfbfb, #ebedee);
      padding: 40px;
      margin: 0;
    }
    h1 {
      text-align: center;
      color: #333;
      font-size: 2em;
      margin-bottom: 30px;
    }
    .container {
      max-width: 700px;
      margin: 0 auto;
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    }
    textarea {
      width: 100%;
      height: 100px;
      margin-bottom: 20px;
      padding: 15px;
      font-size: 1.1em;
      border: 2px solid #ccc;
      border-radius: 10px;
      transition: border-color 0.3s;
      resize: vertical;
    }
    textarea:focus {
      border-color: #0077cc;
      outline: none;
    }
    .button-group {
      text-align: center;
      margin-bottom: 20px;
    }
    button {
      padding: 12px 24px;
      margin: 0 10px;
      font-size: 1em;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background-color: #0077cc;
      color: white;
      transition: background-color 0.3s, transform 0.1s;
    }
    button:hover {
      background-color: #005fa3;
    }
    button:active {
      transform: scale(0.98);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Georgian ⇄ Latin ⇄ IPA Converter</h1>
    <textarea id="inputText" placeholder="Enter Georgian, Latin, or IPA..."></textarea>
    <div class="button-group">
      <button onclick="convert('georgian')">To Georgian</button>
      <button onclick="convert('latin')">To Latin</button>
      <button onclick="convert('ipa')">To IPA</button>
    </div>
    <textarea id="outputText" readonly placeholder="Output..."></textarea>
  </div>

<script>
  const table = [
    ['წ', "ts’", 'tsʼ'], ['ჭ', "ch’", 'tʃʼ'], ['ყ', "q’", 'qʼ'],
    ['ტ', "t’", 'tʼ'], ['კ', "k’", 'kʼ'], ['პ', "p’", 'pʼ'],
    ['ჩ', 'ch', 'tʃ'], ['ც', 'ts', 'ts'], ['ძ', 'dz', 'dz'],
    ['ხ', 'kh', 'x'], ['ჟ', 'zh', 'ʒ'], ['ღ', 'gh', 'ɣ'], ['შ', 'sh', 'ʃ'],
    ['ჯ', 'j', 'dʒ'], ['თ', "t", 'tʰ'], ['ფ', 'p', 'pʰ'], ['ქ', 'k', 'kʰ'],
    ['ა', 'a', 'ɑ'], ['ბ', 'b', 'b'], ['გ', 'g', 'g'], ['დ', 'd', 'd'], ['ე', 'e', 'ɛ'],
    ['ვ', 'v', 'v'], ['ზ', 'z', 'z'], ['ი', 'i', 'i'], ['ლ', 'l', 'l'],
    ['მ', 'm', 'm'], ['ნ', 'n', 'n'], ['ო', 'o', 'ɔ'], ['რ', 'r', 'r'],
    ['ს', 's', 's'], ['უ', 'u', 'u'], ['ჰ', 'h', 'h']
  ];

  function convert(mode) {
    let input = document.getElementById("inputText").value;
    let output = input;

    if (mode === 'georgian') {
      // IPAやLatinをGeorgianへ：長いものから順に処理
      // ① IPA → Georgian
      table.sort((a, b) => b[2].length - a[2].length).forEach(([geo, lat, ipa]) => {
        output = output.replaceAll(ipa, geo);
      });
      // ② Latin → Georgian
      table.sort((a, b) => b[1].length - a[1].length).forEach(([geo, lat, ipa]) => {
        output = output.replaceAll(lat, geo);
      });
    } else if (mode === 'latin') {
      // Georgian → Latin：文字単位処理
      table.forEach(([geo, lat]) => {
        output = output.replaceAll(geo, lat);
      });
    } else if (mode === 'ipa') {
      // Georgian → IPA：文字単位処理
      table.forEach(([geo, _, ipa]) => {
        output = output.replaceAll(geo, ipa);
      });
    }

    document.getElementById("outputText").value = output;
  }
</script>
</body>
</html>
